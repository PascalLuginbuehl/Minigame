!function t(e,i,o){function s(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(n)return n(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return s(i?i:t)},l,l.exports,t,e,i,o)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<o.length;r++)s(o[r]);return s}({1:[function(t,e,i){"use strict";var o=t("./../../common/Classes/Game"),s=t("./../../common/Classes/Communicator"),n=t("./../../common/Classes/Render"),r=t("./../../common/Classes/Input"),a={gameLoopInterval:16,map:{height:1e3,width:1e3},textureBasepath:"assets/images/",textures:{dirt:{texture:"dirt.png",w:16,h:16,spriteMax:5},house:{texture:"house.png",w:254,h:198,spriteMax:1},duck:{texture:"player.png",w:16,h:18,spriteMax:4}},models:{dirt:{solid:!0,static:!1,hitbox:[{x:0,y:0,w:16,h:16}]},house:{solid:!0,static:!0,hitbox:[{x:0,y:0,w:254,h:198}]},duck:{solid:!0,static:!1,hitbox:[{x:0,y:0,w:18,h:18}]}}},c=new o.default(a,performance.now),h=new s.default(c),l=new r.default(c,h);document.addEventListener("DOMContentLoaded",function(){new n.default(c,document.body,{renderHitbox:!0},l.player)})},{"./../../common/Classes/Communicator":2,"./../../common/Classes/Game":4,"./../../common/Classes/Input":6,"./../../common/Classes/Render":9}],2:[function(t,e,i){"use strict";var o=t("./Vector"),s=function(){function t(t){var e=this;this.websocket=new WebSocket("ws://localhost"),this.websocket.onopen=function(){e.websocket.send("Ping")},this.websocket.onerror=function(t){console.log("WebSocket Error "+t)},this.websocket.onmessage=function(t){try{var i=JSON.parse(t.data);switch(i.action){case"updateMovement":e.updateMovement(i.params);break;case"loadStaticElements":e.loadStaticElements(i.params);break;case"loadMovingElements":e.loadMovingElements(i.params)}}catch(t){console.error(t)}},this.game=t}return t.prototype.updateMovement=function(t){var e=t.arrayPosition,i=t.force;this.game.entitys[e].force=new o.default(i)},t.prototype.loadStaticElements=function(t){},t.prototype.loadMovingElements=function(t){},t.prototype.loadMap=function(){},t.prototype.sendInput=function(t){this.websocket.send(JSON.stringify(t))},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"./Vector":10}],3:[function(t,e,i){"use strict";var o=t("./Vector"),s=function(){function t(t){var e=t.positionX,i=void 0===e?0:e,s=t.positionY,n=void 0===s?0:s,r=(t.texture,t.solid,t.static,t.model);this.position=new o.default(i,n),this.velocity=new o.default(0,0),this.force=new o.default(0,0),this.model=r}return t.prototype.renderTexture=function(t){(void 0==this.lastSprite||this.lastSprite>=this.model.spriteMax)&&(this.lastSprite=0);var e=Math.atan2(this.velocity.x,this.velocity.y),i=Math.round(e*(4/Math.PI)),o=i<-0?i*-1+4:i,s=0;switch(o){case 0:s=this.velocity.y;break;case 1:s=(this.velocity.x+this.velocity.y)/2;break;case 2:s=this.velocity.x;break;case 3:s=(this.velocity.x+this.velocity.y*-1)/2;break;case 8:case 4:s=this.velocity.y*-1;break;case 5:s=(this.velocity.x*-1+this.velocity.y)/2;break;case 6:s=this.velocity.x*-1;break;case 7:s=(this.velocity.x+this.velocity.y)/2*-1}this.lastSprite+=s/500,t.save(),t.translate(this.position.x,this.position.y),t.drawImage(this.model.texture,this.model.textureSize.x*Math.floor(this.lastSprite),0,this.model.textureSize.x,this.model.textureSize.y,0,0,this.model.textureSize.x,this.model.textureSize.y),t.restore()},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"./Vector":10}],4:[function(t,e,i){"use strict";var o=t("./Model"),s=t("./Entity"),n=function(){function t(t,e){this.config=t,this.height=t.map.height,this.width=t.map.width,this.timeFunction=e,this.entitys=[],this.models={};for(var i in this.config.models)this.models[i]=new o.default(this.config.models[i]);this.addEntity(new s.default({positionX:300,positionY:70,model:this.models.duck})),this.addEntity(new s.default({positionX:0,positionY:0,model:this.models.house})),this.addEntity(new s.default({positionX:700,positionY:700,model:this.models.house})),this.expectedInterval=this.timeFunction()+this.config.gameLoopInterval,setTimeout(this.gameLoop.bind(this),this.config.gameLoopInterval)}return t.prototype.addEntity=function(t){this.entitys.push(t)},t.prototype.gameLoop=function(){this.specialInput();var t=this.timeFunction()-this.expectedInterval;t>this.config.gameLoopInterval&&(this.overtimeError(t),this.expectedInterval=this.timeFunction());for(var e=(t+this.config.gameLoopInterval)/1e3,i=0;i<this.entitys.length;i++){var o=this.entitys[i];if(!o.model.static){var s=o.force.scale(2e3);o.velocity=o.velocity.add(s.scale(e)).scale(.92);for(var n=o.position.add(o.velocity.scale(e)),r=!1,a=0;a<this.entitys.length;a++){var c=this.entitys[a];o!=c&&o.model.solid&&c.model.solid&&o.model.hitbox.checkCollision(n,c.position,c.model.hitbox)&&(r=!0)}r?o.velocity=o.velocity.scale(.1):o.position=n}}this.expectedInterval+=this.config.gameLoopInterval,setTimeout(this.gameLoop.bind(this),this.config.gameLoopInterval-t)},t.prototype.overtimeError=function(t){console.error("overtimeError: "+t)},t.prototype.specialInput=function(){},t.prototype.exportMap=function(){for(var t=[],e=0;e<this.entitys.length;e++){var i=this.entitys[e];for(var o in this.models)this.models[o]==i.model&&t.push({position:i.position,velocity:i.velocity,force:i.force,model:o})}return t},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{"./Entity":3,"./Model":7}],5:[function(t,e,i){"use strict";var o=t("./Vector"),s=t("./Rectangle"),n=function(){function t(t){this.hitboxes=[];for(var e=0;e<t.length;e++)this.hitboxes.push(new s.default(t[e]));this.collisionBox=this.getCollisionBox()}return t.prototype.checkCollision=function(t,e,i){if(this.collisionBox.checkCollision(t,e,i.collisionBox))for(var o=0;o<this.hitboxes.length;o++)for(var s=this.hitboxes[o],n=0;n<i.hitboxes.length;n++)if(s.checkCollision(t,e,i.hitboxes[n]))return!0;return!1},t.prototype.getCollisionBox=function(){for(var t=new o.default(0,0),e=0;e<this.hitboxes.length;e++){var i=this.hitboxes[e];t=t.biggest(i.min.add(i.max))}for(var n=new o.default(t.x,t.y),e=0;e<this.hitboxes.length;e++)n=n.smalest(this.hitboxes[e].min);return new s.default({min:n,max:t})},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{"./Rectangle":8,"./Vector":10}],6:[function(t,e,i){"use strict";var o=t("./Entity"),s=t("./Vector"),n=function(){function t(t,e){var i=this;this.game=t,this.communicator=e,this.player=new o.default({positionX:300,positionY:300,model:this.game.models.duck}),this.game.addEntity(this.player),console.log(this.player),this.keys={w:!1,a:!1,s:!1,d:!1,ArrowUp:!1,ArrowLeft:!1,ArrowDown:!1,ArrowRigth:!1};this.keys,this.player;t.__proto__.specialInput=function(){},window.addEventListener("keydown",function(t){i.keys.hasOwnProperty(t.key)&&(i.keys[t.key]=!0,i.player.force=i.direction(),i.communicator.sendInput({action:"updateMovement",params:{arrayPosition:3,force:i.direction()}}),t.preventDefault())}),window.addEventListener("keyup",function(t){i.keys.hasOwnProperty(t.key)&&(i.keys[t.key]=!1,i.player.force=i.direction(),i.communicator.sendInput({action:"updateMovement",params:{arrayPosition:3,force:i.direction()}}),t.preventDefault())})}return t.prototype.direction=function(){var t=new s.default(0,0);return this.keys.w&&t.y--,this.keys.a&&t.x--,this.keys.s&&t.y++,this.keys.d&&t.x++,t},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{"./Entity":3,"./Vector":10}],7:[function(t,e,i){"use strict";var o=t("./Hitbox"),s=function(){function t(t){var e=t.solid,i=void 0===e||e,s=t.static,n=void 0!==s&&s,r=t.hitbox;this.solid=i,this.static=n,this.hitbox=new o.default(r)}return t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"./Hitbox":5}],8:[function(t,e,i){"use strict";var o=t("./Vector"),s=function(){function t(t){var e=t.x,i=void 0===e?0:e,s=t.y,n=void 0===s?0:s,r=t.w,a=void 0===r?0:r,c=t.h,h=void 0===c?0:c,l=t.min,u=t.max;void 0!=l&&void 0!=u?(this.min=l,this.max=u):(this.min=new o.default(i,n),this.max=new o.default(a,h))}return t.prototype.checkCollision=function(t,e,i){var o=i.min.add(e),s=this.min.add(t);return s.x<o.x+i.max.x&&this.max.x+s.x>o.x&&s.y<i.max.y+o.y&&this.max.y+s.y>o.y},t.prototype.drawRect=function(t,e){e.save(),t=t.add(this.min),e.translate(t.x,t.y),e.fillStyle="rgba(0, 0, 0, .3)",e.fillRect(0,0,this.max.x,this.max.y),e.restore()},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"./Vector":10}],9:[function(t,e,i){"use strict";var o=t("./Vector"),s=function(){function t(t,e,i,s){var n=this;this.canvas=document.createElement("canvas"),this.canvas.height=this.canvas.height=document.documentElement.clientHeight,this.canvas.width=this.canvas.width=document.documentElement.clientWidth,e.appendChild(this.canvas),this.canvas.style.imageRendering="pixelated",this.ctx=this.canvas.getContext("2d"),this.origin=s,this.game=t,this.debugging=i;for(var r in this.game.models){var a=new Image,c=this.game.config.textures[r];a.src="assets/images/"+c.texture,this.game.models[r].spriteMax=c.spriteMax,this.game.models[r].texture=a,this.game.models[r].textureSize=new o.default(c.w,c.h)}window.addEventListener("resize",function(){n.canvas.width=document.documentElement.clientWidth,n.canvas.height=document.documentElement.clientHeight}),setInterval(this.render.bind(this),Math.round(1e3/60))}return t.prototype.render=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.translate(this.origin.position.x*-1+this.canvas.width/2,this.origin.position.y*-1+this.canvas.height/2);for(var t=0;t<this.game.entitys.length;t++){var e=this.game.entitys[t];e.renderTexture(this.ctx);for(var i=0;i<e.model.hitbox.hitboxes.length;i++)e.model.hitbox.hitboxes[i].drawRect(e.position,this.ctx)}this.ctx.restore()},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"./Vector":10}],10:[function(t,e,i){"use strict";var o=function(){function t(t,e){t instanceof Object?(this.x=Math.round(10*t.x)/10,this.y=Math.round(10*t.y)/10):(this.x=Math.round(10*t)/10,this.y=Math.round(10*e)/10)}return t.prototype.add=function(e){return new t(Math.round(10*(e.x+this.x))/10,Math.round(10*(e.y+this.y))/10)},t.prototype.subtract=function(e){return new t(Math.round(10*(this.x-e.x))/10,Math.round(10*(this.y-e.y))/10)},t.prototype.scale=function(e){return new t(Math.round(this.x*e*10)/10,Math.round(this.y*e*10)/10)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.smalest=function(e){var i=this.x<e.x?this.x:e.x,o=this.y<e.y?this.y:e.y;return new t(i,o)},t.prototype.biggest=function(e){var i=this.x>e.x?this.x:e.x,o=this.y>e.y?this.y:e.y;return new t(i,o)},t.prototype.rotate=function(e,i){var o=this.x-i.x,s=this.y-i.y,n=i.x+(o*Math.cos(e)-s*Math.sin(e)),r=i.y+(o*Math.sin(e)+s*Math.cos(e));return new t(n,r)},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},{}]},{},[1]);
//# sourceMappingURL=bundle.js.map
